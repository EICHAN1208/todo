

# Task

## 変数
- @id
- @due_date
- @completed_at
- @title


# 仕様(ユーザーからみたtodoプログラム)

- bin/todo ~ のコマンドをCLI上で実行することにより、タスク管理ができるプログラム
- bin/todo --help で各コマンドの説明を表示することができる
- bin/todo add (title) でタスクの追加をすることができる
  - (-d or --due)と(日付)をコマンド引数にとることで、期日を設定することができる
  - titleはユーザーが入力するタスク名
- bin/todo done (id) でidを指定して、タスクを完了することができる
  - bin/todo allをするとdoneしたタスクは表示されない
  - idはランダムに決められる
- bin/todo archived で完了したタスクを表示することができる
- bin/todo all で完了していない全てのタスクを表示することができる
- bin/todo today で期日が今日のタスクかつ完了されていないタスクを表示することができる


## 名詞
- タスク
- タスク管理
- 日付
- 今日

- id
- 期日
- 完了日
- タイトル


## 仕様(プログラムのことは考えるが、実装のことは考えない、プログラムが主語)

- ユーザーが入力したコマンドに応じて挙動が異なる
  - 入力するコマンドは(help, add, done, all, today, archived)で、その入力に応じて、プログラムを実行する部分を選択する

- helpは、あらかじめ決まっているテキストをターミナルに表示する

- addは、ユーザーが入力した任意のtitleとランダムに生成したidの組み合わせ(id,title)をタスクとしてファイルに保存する
  またコマンドの引数で-d, --dueをつけて期日が指定されると、(id, 期日, title)の組み合わせをタスクとしてファイルに保存する
  保存したタスク(id, 期日, title)を項目(id, due_date, completed_at, title)と合わせて、ターミナルに表示する

- doneは、ファイルに保存されたタスクを読み込んで、読み込んだタスクからそのidをコマンドで指定して完了日だけをファイルに保存する
  保存した(id, 完了日, title)を項目と合わせてターミナルに表示する

- allは、ファイルに保存されたタスクを読み込んで、読み込んだタスクから完了されていないタスクを選び、ターミナルにそのタスク全てを項目と合わせて表示する
  完了されていないタスクがない場合
  タスクがない場合は、ターミナルに'no tasks'とターミナルに表示する

- todayは、ファイルに保存されたタスクを読み込んで、読み込んだタスクから期日が今日の日付のタスクを選び、ターミナルに項目と合わせて表示する
  期日が今日のタスクがない場合
  期日が今日のタスクはあるが、そのタスクが全て完了されている場合
  タスクがない場合、は'no tasks'とターミナルに表示する

- archivedは、ファイルに保存されたタスクを読み込んで、読み込んだタスクから完了されたタスクを選択し、ターミナルに項目と合わせて表示する
  完了されたタスクがない場合、'no tasks'とターミナルに表示する

- tmpディレクトリに、ファイルを保存する
- 保存するファイルの形式はjson
  設定ファイルの内容をcsvに変更することで、保存できるファイルの形式をcsvにできる
- 設定ファイルがないときは、jsonで保存されるようにする


## 処理の流れ

- 入力内容を判断して、実行部分を選択するプログラム
  - ユーザーの入力に応じて、プログラムを実行する部分を選択する

- コマンドの説明文を表示するプログラム(help)
  (入力内容を判断して、実行部分を選択するプログラム) -> (テキストに変換するプログラム)

- タスク(id, 期日, title)を登録するプログラム(add)
  - (入力内容を判断して、実行部分を選択するプログラム)からの内容(id, 期日, title)を
    (保存ファイル切り替えプログラム)を介して、(書き込み/読み込みプログラム)と(テキストに変換するプログラム)に渡す

- 完了日を登録するプログラム(done)
  (入力内容を判断して、実行部分を選択するプログラム)からの内容(id)を、
  (書き込み/読み込みプログラム)からのタスクに渡した後に、(保存ファイル切り替えプログラム)を介して、
  (書き込み/読み込みプログラム)と(テキストに変換するプログラム)に渡す

- 条件に合うタスクを表示するプログラム(all, today, archived)
  - (入力内容を判断して、実行部分を選択するプログラム) -> (条件に合うタスクを選ぶプログラム)
    -> (書き込み/読み込みプログラム) -> (テキストに変換するプログラム)

- 条件に合うタスクを選ぶプログラム
  - (書き込み/読み込みプログラム)で読み込んだタスクから、該当のタスクを選ぶ

- テキストに変換するプログラム
  - ターミナルに表示する

- 書き込み/読み込みプログラム
  - json設定のとき
  - (条件に合うタスクを選ぶプログラム)で選んだタスクをjsonでファイルに保存する
  - ファイルから(条件に合うタスクを選ぶプログラム)で選んだタスクをjsonファイルから読み込む

  - csv設定のとき
  - (条件に合うタスクを選ぶプログラム)で選んだタスクをcsvでファイルに保存する
  - ファイルから(条件に合うタスクを選ぶプログラム)で選んだタスクをcsvファイルから読み込む

- 保存ファイル切り替えプログラム
  - 設定ファイルの内容はあらかじめ設定されている(json, csv)
  - 設定ファイルの内容によって、実行される(書き込み/読み込みプログラム)の内容が変わる


## クラスとメソッドの命名

- config
  - 保存ファイル切り替えプログラム
    - 設定ファイルの内容はあらかじめ設定されている(json, csv)
    - 設定ファイルの内容によって、実行される(書き込み/読み込みプログラム)の内容が変わる

### Renderer
- render
  - テキストに変換するプログラム
    - ターミナルに表示する

- render_help_option
  - コマンドの説明文を表示するプログラム(help)
    (入力内容を判断して、実行部分を選択するプログラム) -> (テキストに変換するプログラム)

### Router
- route
  - 入力内容を解析して、実行部分を振り分けるプログラム
    - ユーザーの入力に応じて、プログラムを実行する部分を選択する

### Task
- self.add
  - タスク(id, 期日, title)を登録するプログラム(add)
    - (入力内容を判断して、実行部分を選択するプログラム)からの内容(id, 期日, title)を
      (保存ファイル切り替えプログラム)を介して、(書き込み/読み込みプログラム)と(テキストに変換するプログラム)に渡す
    - addメソッドか呼ばれることで、ファイルの内容が読み込まれて全てのタスクのインスタンスが一時的にstorageクラスの@tasksに置かれる(task_finder.allを使う)
    - タスクインスタンスは、addメソッドが呼ばれることで作られ, そのままStorageクラスのインスタンスメソッドを介して保存される


- done
  - 完了日を登録するプログラム(done)
    (入力内容を判断して、実行部分を選択するプログラム)からの内容(id)を、
    (書き込み/読み込みプログラム)からのタスクに渡した後に、(保存ファイル切り替えプログラム)を介して、
    (書き込み/読み込みプログラム)と(テキストに変換するプログラム)に渡す

### TaskFinder
- all, today, archived
  - 条件に合うタスクを選ぶプログラム
    - (書き込み/読み込みプログラム)で読み込んだタスクから、該当のタスクを選ぶ

  - 条件に合うタスクを選び、表示するプログラム(all, today, archived)
    - (入力内容を判断して、実行部分を選択するプログラム) -> (条件に合うタスクを選ぶプログラム)
      -> (書き込み/読み込みプログラム) -> (テキストに変換するプログラム)

### Storage
- write_json, read_json
- write_csv, read_csv
  - 書き込み/読み込みプログラム
    - json設定のとき
    - (条件に合うタスクを選ぶプログラム)で選んだタスクをjsonでファイルに保存する
    - ファイルから(条件に合うタスクを選ぶプログラム)で選んだタスクをjsonファイルから読み込む

    - csv設定のとき
    - (条件に合うタスクを選ぶプログラム)で選んだタスクをcsvでファイルに保存する
    - ファイルから(条件に合うタスクを選ぶプログラム)で選んだタスクをcsvファイルから読み込む
